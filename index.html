<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æç¤ºè¯ç®¡ç†å™¨ - è”ç½‘åŒæ­¥ç‰ˆ</title>
    <style>
        :root {
            --primary-blue: #4A90E2;
            --primary-green: #50E3C2;
            --danger-red: #ff7675;
            --purple-share: #9b59b6;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --border-color: #333;
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .main-container {
            display: flex;
            gap: 25px;
            width: 100%;
            max-width: 1200px;
            align-items: flex-start;
            flex-direction: column;
        }
        .top-bar {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }
        .app-title { margin: 0; font-size: 1.5em; }
        .data-controls { display: flex; gap: 10px; }
        .btn-data {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            font-size: 14px;
        }
        .btn-export { background-color: var(--purple-share); }
        .btn-import { background-color: #34495e; position: relative; overflow: hidden; }
        .btn-sync { background-color: #e67e22; }
        #fileInput {
            position: absolute; inset: 0;
            opacity: 0; cursor: pointer;
        }
        .content-area {
            display: flex;
            gap: 25px;
            width: 100%;
        }
        .panel {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 600px;
        }
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .filter-row { display: flex; gap: 15px; margin-bottom: 15px; }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            box-sizing: border-box;
        }
        .main-textarea {
            flex: 1;
            resize: none;
            margin-bottom: 20px;
        }
        .action-buttons { display: flex; gap: 15px; }
        .btn-big {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        .btn-copy { background-color: var(--primary-blue); }
        .btn-save { background-color: var(--primary-green); }
        .storage-list { flex: 1; overflow-y: auto; }
        .card {
            border-left: 5px solid var(--primary-blue);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>

<div class="main-container">
    <div class="top-bar">
        <h1 class="app-title">ğŸš€ AI æç¤ºè¯ç®¡ç†å™¨</h1>
        <div class="data-controls">
            <button class="btn-data btn-sync" onclick="forceFetchGithub()">â†» é‡æ–°åŠ è½½æ•°æ®</button>
            <button class="btn-data btn-export" onclick="exportData()">ğŸ“¤ å¯¼å‡ºå¤‡ä»½</button>
            <button class="btn-data btn-import">
                ğŸ“¥ å¯¼å…¥æ•°æ®
                <input type="file" id="fileInput" accept=".json" onchange="importData(this)">
            </button>
        </div>
    </div>

    <div class="content-area">
        <div class="panel">
            <input id="inputName" placeholder="äº§å“åç§°">
            <select id="inputType">
                <option>åœºæ™¯å›¾</option><option>ä¸»å›¾</option>
                <option>å°ºå¯¸å›¾</option><option>å±•ç¤ºå›¾</option><option>å…¶ä»–</option>
            </select>
            <textarea id="mainEditor" class="main-textarea"></textarea>
            <div class="action-buttons">
                <button class="btn-big btn-copy" onclick="copyText()">å¤åˆ¶</button>
                <button class="btn-big btn-save" onclick="saveData()">ä¿å­˜</button>
            </div>
        </div>

        <div class="panel">
            <input id="searchName" placeholder="æœç´¢">
            <select id="searchType">
                <option value="All">å…¨éƒ¨</option>
                <option>åœºæ™¯å›¾</option><option>ä¸»å›¾</option>
                <option>å°ºå¯¸å›¾</option><option>å±•ç¤ºå›¾</option><option>å…¶ä»–</option>
            </select>
            <div id="storageList" class="storage-list"></div>
        </div>
    </div>
</div>

<script>
const DB_KEY = 'my_prompts_db_v5';

/* âœ… åªæ”¹è¿™ä¸€è¡Œ */
const GITHUB_DATA_URL = './prompts.json';

window.onload = initData;

function initData() {
    const localData = getSavedData();
    if (localData.length === 0) fetchAndSaveData();
    else renderList();
}

async function forceFetchGithub() {
    if (confirm("ç¡®å®šé‡æ–°åŠ è½½ GitHub æ•°æ®ï¼Ÿä¼šè¦†ç›–æœ¬åœ°")) {
        await fetchAndSaveData();
    }
}

async function fetchAndSaveData() {
    try {
        const res = await fetch(GITHUB_DATA_URL);
        if (!res.ok) throw new Error();
        const serverData = await res.json();

        /* ğŸ”’ é˜²æ­¢ç©ºæ•°æ®è¦†ç›– */
        if (!Array.isArray(serverData) || serverData.length === 0) {
            alert("GitHub æ•°æ®ä¸ºç©ºï¼Œå·²å–æ¶ˆè¦†ç›–");
            return;
        }

        localStorage.setItem(DB_KEY, JSON.stringify(serverData));
        renderList();
        alert("åŠ è½½æˆåŠŸï¼š" + serverData.length);
    } catch {
        alert("GitHub æ•°æ®åŠ è½½å¤±è´¥");
    }
}

function getSavedData() {
    const d = localStorage.getItem(DB_KEY);
    return d ? JSON.parse(d) : [];
}

function saveData() {}
function renderList() {}
function copyText() {}
function exportData() {}
function importData() {}
</script>

</body>
</html>
